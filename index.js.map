{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = img => {\n  const {\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = img;\n\n\n\n  return `<li class=\"gallery-card\">\n            <a href=${largeImageURL} class=\"gallery-link\">\n              <img class=\"gallery-img\" src=${webformatURL} alt='s${tags}'>\n            </a>\n\n          <ul class=\"description\">\n            <li class=\"description-item\">\n              <p class=\"descriotion-text\">Likes<span class=\"descriotion-span\">${likes}</span></p>\n            </li>\n            <li class=\"description-item\">\n              <p class=\"descriotion-text\">Views<span class=\"descriotion-span\">${views}</span></p>\n            </li>\n            <li class=\"description-item\">\n              <p class=\"descriotion-text\">Comments<span class=\"descriotion-span\">${comments}</span></p>\n            </li>\n            <li class=\"description-item\">\n              <p class=\"descriotion-text\">Downloads<span class=\"descriotion-span\">${downloads}</</span></p>\n            </li>\n          </ul>\n          </li>`;\n};\n","import axios from 'axios';\n\nexport const fetchPhotosByQuery = (searchQuary, currentPage) => {\n  \n  const axiosOptions = {\n    params: {\n      key: '48274046-7613a5ba2ef136dbd50664a67',\n      q: searchQuary,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page: currentPage,\n    },\n  };\n\n    return axios.get('https://pixabay.com/api/', axiosOptions);\n    \n};\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nimport { createGalleryCardTemplate } from './js/render-functions';\nimport { fetchPhotosByQuery } from './js/pixabay-api';\n\nconst galleryEl = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.loader-container');\nconst loadMoreBtn = document.querySelector('.load-btn-js');\nconst seachFormEl = document.querySelector('.js-seach-form');\n\n\nloaderEl.style.display = 'none';\nlet page = 1;\nlet searchQuary = \"\";\nlet totalPages = 0;\n\niziToast.settings({\n  position: 'topRight',\n  theme: 'dark',\n  backgroundColor: '#ef4040',\n  timeout: 2000,\n});\n\nconst lightbox = new SimpleLightbox('.js-gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n    animationSpeed: 400,\n});\n\nconst onSeachFormSubmit = async evt => {\n    try {\n      evt.preventDefault();\n      galleryEl.innerHTML = '';\n      loaderEl.style.display = 'block';\n\n      searchQuary = evt.currentTarget.elements.user_query.value.trim();\n\n    \n      if (searchQuary === '') {\n        iziToast.info({\n          message: 'Please feel this field!',\n          });\n          loaderEl.style.display = 'none';\n          return;\n      }\n      \n      page = 1;\n      loadMoreBtn.classList.add('is-hidden');\n      \n      const {data} = await fetchPhotosByQuery(searchQuary, page);\n      \n      loaderEl.style.display = 'none';\n\n      if (data.total === 0) {\n        iziToast.info({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        galleryEl.innerHTML = '';\n        seachFormEl.reset();\n        return;\n      }\n      \n      totalPages = Math.ceil(data.totalHits / data.hits.length);\n      \n      if (totalPages > 1) {\n        loadMoreBtn.classList.remove('is-hidden');\n        loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n      }\n    \n      const galleryTemplate = data.hits.map(img => createGalleryCardTemplate(img)).join('');\n      galleryEl.innerHTML = galleryTemplate;\n      lightbox.refresh();\n\n    } catch (err) {\n      loaderEl.style.display = 'none';\n        console.log(err);\n    }\n};\n\nseachFormEl.addEventListener('submit', onSeachFormSubmit);\n\n\nconst onLoadMoreBtnClick = async () => {\n  try {\n    loadMoreBtn.classList.add('is-hidden');\n    page++;\n    loaderEl.style.display = 'block';\n    const { data } = await fetchPhotosByQuery(searchQuary, page);\n    loaderEl.style.display = 'none';\n    const galleryTemplate = data.hits\n      .map(img => createGalleryCardTemplate(img))\n      .join('');\n    galleryEl.insertAdjacentHTML('beforeend', galleryTemplate);\n    lightbox.refresh();\n    loadMoreBtn.classList.remove('is-hidden');\n    \n    const cardHeight = document\n      .querySelector('.gallery-card:last-child')\n      .getBoundingClientRect().height;\n    \n    scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    totalPages = Math.ceil(data.totalHits / data.hits.length);\n\n    if (page === totalPages) {\n      iziToast.info({\n        message:\n          \"We're sorry, but you've reached the end of search results.\",\n      });\n      loadMoreBtn.classList.add('is-hidden');\n      loadMoreBtn.removeEventListener('click', onLoadMoreBtnClick);\n    }\n\n  } catch (error) {\n    loaderEl.style.display = 'none';\n    console.log(error);\n  }\n};\n"],"names":["createGalleryCardTemplate","img","webformatURL","largeImageURL","tags","likes","views","comments","downloads","fetchPhotosByQuery","searchQuary","currentPage","axiosOptions","axios","galleryEl","loaderEl","loadMoreBtn","seachFormEl","page","totalPages","iziToast","lightbox","SimpleLightbox","onSeachFormSubmit","evt","data","onLoadMoreBtnClick","galleryTemplate","err","cardHeight","error"],"mappings":"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"}