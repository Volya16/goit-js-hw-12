{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = img => {\n  const {\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = img;\n\n\n\n  return `<li class=\"gallery-card\">\n            <a href=${largeImageURL} class=\"gallery-link\">\n              <img class=\"gallery-img\" src=${webformatURL} alt='s${tags}'>\n            </a>\n\n          <ul class=\"description\">\n            <li class=\"description-item\">\n              <p class=\"descriotion-text\">Likes<span class=\"descriotion-span\">${likes}</span></p>\n            </li>\n            <li class=\"description-item\">\n              <p class=\"descriotion-text\">Views<span class=\"descriotion-span\">${views}</span></p>\n            </li>\n            <li class=\"description-item\">\n              <p class=\"descriotion-text\">Comments<span class=\"descriotion-span\">${comments}</span></p>\n            </li>\n            <li class=\"description-item\">\n              <p class=\"descriotion-text\">Downloads<span class=\"descriotion-span\">${downloads}</</span></p>\n            </li>\n          </ul>\n          </li>`;\n};\n","import axios from 'axios';\n\nexport const fetchPhotosByQuery = (searchQuary, currentPage) => {\n  \n  const axiosOptions = {\n    params: {\n      key: '48274046-7613a5ba2ef136dbd50664a67',\n      q: searchQuary,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page: currentPage,\n    },\n  };\n\n\n    return axios.get('https://pixabay.com/api/', axiosOptions);\n    \n};\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nimport { createGalleryCardTemplate } from './js/render-functions';\nimport { fetchPhotosByQuery } from './js/pixabay-api';\n\nconst galleryEl = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.loader-container');\nconst loadMoreBtn = document.querySelector('.load-btn-js');\nconst seachFormEl = document.querySelector('.js-seach-form');\n\nlet page = 1;\nlet searchQuary = \"\";\nlet totalPages = 0;\n\niziToast.settings({\n  position: 'topRight',\n  theme: 'dark',\n  backgroundColor: '#ef4040',\n  timeout: 2000,\n});\n\nconst lightbox = new SimpleLightbox('.js-gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n    animationSpeed: 400,\n});\n\nconst onSeachFormSubmit = async evt => {\n    try {\n      evt.preventDefault();\n\n        searchQuary = evt.currentTarget.elements.user_query.value.trim();\n\n    \n        if (searchQuary === '') {\n            iziToast.info({\n              message: 'Please feel this field!',\n            });\n            return;\n      }\n      \n      page = 33;\n      loadMoreBtn.classList.add('is-hidden');\n      \n      const {data} = await fetchPhotosByQuery(searchQuary, page);\n      \n      if (data.total === 0) {\n        iziToast.info({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        galleryEl.innerHTML = '';\n        seachFormEl.reset();\n        return;\n      }\n      \n      totalPages = Math.ceil(data.totalHits / data.hits.length);\n      loaderSwitcher(false);\n      if (totalPages > 1) {\n        loadMoreBtn.classList.remove('is-hidden');\n        loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n      }\n    \n      \n      const galleryTemplate = data.hits.map(img => createGalleryCardTemplate(img)).join('');\n      lightbox.refresh();\n      loaderSwitcher(true);\n\n      galleryVisibly(true);\n      galleryEl.innerHTML = galleryTemplate;\n\n    } catch (err) {\n        console.log(err);\n    }\n    finally {\n      // loadMoreBtn.classList.remove('is-hidden');\n    }\n};\n\nseachFormEl.addEventListener('submit', onSeachFormSubmit);\n\n\n\n\nconst onLoadMoreBtnClick = async () => {\n  try {\n    loadMoreBtn.classList.add('is-hidden');\n    loaderSwitcher(false);\n    page++;\n    const { data } = await fetchPhotosByQuery(searchQuary, page);\n    const galleryTemplate = data.hits\n      .map(img => createGalleryCardTemplate(img))\n      .join('');\n    galleryEl.insertAdjacentHTML('beforeend', galleryTemplate);\n    lightbox.refresh();\n    // galleryVisibly(true);\n    loadMoreBtn.classList.remove('is-hidden');\n\n    totalPages = Math.ceil(data.totalHits / data.hits.length);\n\n    if (page === totalPages) {\n      iziToast.info({\n        message:\n          \"We're sorry, but you've reached the end of search results.\",\n      });\n      loadMoreBtn.classList.add('is-hidden');\n      loadMoreBtn.removeEventListener('click', onLoadMoreBtnClick);\n    }\n\n  } catch (error) {\n    console.log(error);\n  }\n  finally {\n    loaderSwitcher(true);\n  }\n};\n\n\nfunction loaderSwitcher(boolean) {\n  if (boolean) {\n    setTimeout(() => {\n      loaderEl.classList.add('is-hidden');\n    }, 500);\n  } else {\n    loaderEl.classList.remove('is-hidden');\n  }\n}\n\nfunction galleryVisibly(boolean) {\n  if (boolean) {\n    galleryEl.classList.remove('is-visibly');\n  } else {\n    galleryEl.classList.add('is-visibly');\n  }\n  \n  \n  \n  \n  //   if (searchQuary === '') {\n  //     // loaderSwitcher(false);\n  //     setTimeout(() => {\n  //       iziToast.error({\n  //         message: 'Please feel this field!',\n  //       });\n  //     }, 500);\n  //     // seachFormEl.reset();\n  //     // loaderSwitcher(true);\n  //     return;\n  //   }\n  \n  //   galleryVisibly(true);\n  //   loaderSwitcher(false);\n  \n  //     .then(data => {\n  //       \n  //     })\n  //     .catch(err => {\n  //       console.log(err);\n  //     })\n  //     .finally(() => {\n  //       seachFormEl.reset();\n  //       loaderSwitcher(true);\n  //     });\n  //   galleryVisibly(false);\n}"],"names":["createGalleryCardTemplate","img","webformatURL","largeImageURL","tags","likes","views","comments","downloads","fetchPhotosByQuery","searchQuary","currentPage","axiosOptions","axios","galleryEl","loaderEl","loadMoreBtn","seachFormEl","page","totalPages","iziToast","lightbox","SimpleLightbox","onSeachFormSubmit","evt","data","loaderSwitcher","onLoadMoreBtnClick","galleryTemplate","galleryVisibly","err","error","boolean"],"mappings":"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"}